\documentclass[11pt,a4paper,notitlepage]{article}

    \usepackage[margin=1in]{geometry}
    \usepackage{algorithm}
    \usepackage{algpseudocode}
    \usepackage{graphicx}
    \usepackage{subcaption}
    \usepackage{mwe}
    \usepackage{amsmath}
    \usepackage{float}

    \title{CCS - Network Analysis Assignment}
    \author{Fatema Alkhanaizi}
    \date{\today}

\begin{document}

\graphicspath{ {../distributions/q2/} {../distributions/q1/} {../distributions/q3/} }

\maketitle

\noindent
Clearly document what you have done. For each question you should report on what you did and include, as needed, illustrative plots.

\section*{Question 1}
\subsection*{Ring Group Graph Degree Distribution when $p + q = 0.5$, $p > q$}
\begin{itemize}
    \item Investigate the degree distribution of Ring Group Graphs for p + q = 0.5, p > q. 
    \item Decide which values of m, k, p and q to investigate. 
    \item You should report on how the structure changes as p and q vary and whether the same effects are found for different values of m and k.
    \item Use plots to illustrate your observations.
\end{itemize}
\begin{figure}[H]
    \centering
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=1\textwidth]{{50-20-0.01}.png}
        \subcaption{m = 50, k = 20}
        \label{pq0.5:m50k20}
    \end{minipage}
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=1\textwidth]{{20-50-0.01}.png}
        \subcaption{m = 20, k = 50}
        \label{pq0.5:m20k50}
    \end{minipage}
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=1\textwidth]{{6-100-0.01}.png}
        \subcaption{m = 6, k = 100}
        \label{pq0.5:m6k100}
    \end{minipage}
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=1\textwidth]{{4-100-0.1}.png}
        \subcaption{m = 4, k = 100}
        \label{pq0.5:m4k100}
    \end{minipage}
    \caption{Ring Group Graph when $p + q = 0.5$, $p > q$}
    \label{rgg:pg0.5}
\end{figure}
The degree distribution for a Ring Group Graph has a bell shaped distribution. The results of the degree distributions in figure\ref{rgg:pg0.5} can be explained by the following equation:
\begin{equation} \label{rgg:vad}
    \text{average\_degree} = p \times (3k - 1) + q \times k \times (m-3) 
\end{equation} 
Equation-\ref{rgg:vad} calculates the average degree for a single vertex based on the paramaters (m, k, p, q). A vertex average degree is heavly infllued by the value of k which is evident in figure-\ref{pq0.5:m20k50} and figure-\ref{pq0.5:m50k20}; for the same number of nodes, p and q values, the distribution in figure-\ref{pq0.5:m20k50} is shifted toward greater degree distribution than in figure-\ref{pq0.5:m50k20}. 

\begin{figure}[H]
    \centering
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=1\textwidth]{{prob-p/50-20-0.01}.png}
        \subcaption{m = 50, k = 20, q = 0.01}
    \end{minipage}
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=1\textwidth]{{prob-p/20-50-0.01}.png}
        \subcaption{m = 20, k = 50, q = 0.01}
    \end{minipage}
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=1\textwidth]{{prob-p/6-100-0.01}.png}
        \subcaption{m = 6, k = 100, q = 0.01}
    \end{minipage}
    \caption{Ring Group Graph when $p > q$ ($q$ is fixed)}
\end{figure}

\subsection*{Diameter of Ring Group Graph and $p$ (for a fixed $q$, $p > q$)}
\begin{itemize}
    \item Investigate the relationship between the diameter of Ring Group Graphs and p (for fixed q, p > q). 
\end{itemize}
\begin{figure}[H]
    \centering
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=1\textwidth]{{diameter/50-20}.png}
        \subcaption{m = 50, k = 20}
    \end{minipage}
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=1\textwidth]{{diameter/20-50}.png}
        \subcaption{m = 20, k = 50}
    \end{minipage}
    \caption{Diameter for Ring Group Graph when $p > q$ ($q$ is fixed)}
\end{figure}

\section*{Question 2}
\subsection*{Distribution of Vertex Brilliance}
\subsubsection*{Calculating Vertex Brilliance}
\begin{itemize}
    \item Construct the undirected graph defined in coauthorship.txt. Ignore edge weights.
    \item For the graph from coauthorship.txt, investigate the distribution of vertex brilliance. 
    \item For each of the following types of graph
    \begin{itemize}
    \item PA Graphs
    \item Ring Group Graphs 
    \end{itemize}
    create examples with approximately the same number of vertices and edges as the graph from coauthorship.txt and investigate the distribution of vertex brilliance. Comment on what you find.
\end{itemize}
The vertex brilliance was caluculated based on a similar approach to calculate the diameter by using breadth-first search but by only checking the neighbours of the vertex's neighbours. The algorithm simplified:
     1. create an empty dictionary < this dictionary will hold the weight vertices for the k-star of the current vertex 
     2. populate the dictionary with v's neighbours and give each vertex in the dictionary a weight of 0 to begin with < this weight will be used to determine which vertex to exclude to get the maximum k-star, the weight corresponds to how many v's neighbours the vertex is connected to
     3. repeat until maximum k-star is found
            - for each vertex in the k-star dictionary go through its neighbours. If one of the vertex neighbour is a key in the k-star dictionary substract 1 from the weight of the vertex (I gave it negative value as just a notion that this is undesired vertex thus a negative affect but it can be calculated with the same manner by adding 1 but then the rest of the code will be modified so it get the maximum value from the k-star values instead of the minimum)
            - find the minimum weight (value) of the k-star dictionary 
            - if the minimum value is 0 then stop as this indicates that non of the vertices in the dictionary are adjacent thus it is the maximum k-star set of vertices (ther can be more than one set but we only care about the length so the actual vertices of the maximum set don't have any actual value for us in this case) so stop the loop
            - else find the vertex with the minumum weight and remove it from the dictionary (this vertex is the most influential as it connects to the most number of vertices and by removing it the rest of vertices will be less adjacent, only the first found vertix will be removed) and reset all the other vertices values to 0 
    4. return the length of the dictionary 
This is essentially an algorithm to get the maximum independent set of sub-graph that only contains v and it's neighbours. I opted to using my own algorithm instead of using networkx's implementation. 
\subsubsection*{Creating Vertex Brilliance Distribution}
For each generated graphs (PA graph and Ring Group graph), the vertex brilliance distribution was averaged and normalized over 100 instances. The distribution was created following the same code as the degree distribution.

\subsection*{Vertex Brilliance Results}
\subsubsection*{Co-authorship Graph}
The co-authorship graph was loaded by following code provided in the lectures; it was just basic file-reading and making sure that the edges were undirected. The following figures are the degree distribution (in blue) and the vertex brilliance distribution (in red) of the graph:
\begin{figure}[H]
    \centering
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=1\textwidth]{coauthorship-vertex-degree.png}
    \end{minipage}
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=1\textwidth]{coauthorship-vertex-brilliance.png}
    \end{minipage} \hfill
    \caption{Loaded Co-authorship Graph including vertices with no edges}
\end{figure}
The general shape of both graphs is skewed to the right.

\subsubsection*{PA Graph}
As the implementation of the PA Graph that we used in the lectures was directed, I modified networkx implementation and matched it to the PA Graph specifications provided in lecture:
\begin{itemize}
    \item I made the first 1 to m vertices fully connected and repeated each vertex m times in a list for selecting the new edges for the remaining vertices
    \item For the remaining m + 1 to n vertices, I randomly picked a vertex from the previous list m times (created an edge). For each iteration until n is reached, I added the new vertex m times in the selection list along with its neighbours.
\end{itemize} 
\begin{figure}[H]
    \centering
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=1\textwidth]{pa_graph-1559-30-degree.png}
    \end{minipage}
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=1\textwidth]{pa_graph-1559-30-brilliance.png}
    \end{minipage} \hfill
    \caption{PA Graph parameters: m = 1559, m = 30}
\end{figure}
Both distributions has been averaged over 100 instances of the PA graph. The resulted graphs for both degree and vertex brilliance distributions are skewed to the right. The co-authorship graph strongly resembles the PA graph based on the distributions. 

\subsubsection*{Ring Group Graph}
To get approximately the same number of edges and nodes as the co-authorship graph, the following parameters were used: m = 60, k = 26, p = 0.22, q = 0.03; there are other possible parameters but their distributions are similar to the distributions with the paramaters used here (in terms of shape). 
\begin{figure}[H]
    \centering
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=1\textwidth]{{ring_group_graph-60-26-0.22-0.03-degree}.png}
    \end{minipage}
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=1\textwidth]{{ring_group_graph-60-26-0.22-0.03-brilliance}.png}
    \end{minipage} \hfill
    \caption{Ring Group Graph parameters: m = 60, k = 26, p = 0.22, q = 0.03}
\end{figure}
\begin{figure}[H]
    \centering
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=1\textwidth]{{ring_group_graph-120-13-0.26-0.04-degree}.png}
    \end{minipage}
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=1\textwidth]{{ring_group_graph-120-13-0.26-0.04-brilliance}.png}
    \end{minipage} \hfill
    \caption{Ring Group Graph parameters: m = 120, k = 13, p = 0.26, q = 0.04}
\end{figure}
Both distributions are bell shaped (binomial distribution).
\\ \\
Based on the previous graphs, it can be concluded that the vertex distribution has the same shape as the degree distribution and the co-authorship graph closely resembles the PA graph. 




\section*{Question 3}
The search time for a given start and target is the total number of queries made in reaching the target from the start (the number of intermediate vertices is not counted). The search time for a graph is the average search time over all pairs of start and target vertices. Clearly these times depend on the algorithm used for deciding when to query, when to move to a new vertex and how to decide which vertex to move to. The aim is that the search time is as small as possible.
\\
\noindent
Note that the array of neighbours of a vertex should not be considered ordered. If you create graphs in such a way that the neighbours are ordered, then either randomize the ordering or, when querying the array of neighbours, choose a random member of the array (from amongst those not already queried).

\begin{itemize}
    \item describe an algorithm for searching in the graphs. (I expect that you will have different algorithms for the different types of graphs.) 
    \item You should explain why you believe your strategy might be effective and implement and test it on many instances. You can choose the parameters yourself as long as you are not perverse — for example, the groups in the Ring Group Graph should not be of size 1 or n — and it is acceptable that all your testing for a particular type of graph is on instances generated with the same parameters. 
    \item As searching on graphs that are not connected can be impossible, you should choose parameters so that the graphs are very likely to be connected. 
    \item Plot search time against the number of instances that achieve that time. Comment on your plots. It is acceptable to estimate search time by looking at only a sample set of pairs of vertices. 
    \item Credit will be given for the effectiveness of the algorithm you design, and also, independently, for your explanation of the rationale behind the design.
\end{itemize}

\subsection*{Search Random Graph}
for Random Graphs, each vertex is labelled with a unique integer between 1 and n.
\subsubsection*{Algorithm}

\begin{algorithmic}
    \If {$i\geq maxval$}
        \State $i\gets 0$
    \Else
        \If {$i+k\leq maxval$}
            \State $i\gets i+k$
        \EndIf
    \EndIf
\end{algorithmic}

\subsection*{Search Ring Group Graph}
for Ring Group Graphs, each vertex is assigned a unique integer and the label of its group (see
Question 1)

\end{document}